---
layout: post
date: 2017-07-05
title: wesbos2
categories: node
tags: fat
---

I am at class x and the past modules have been:

7. Custom queries and hooks (checking and saving unique `slug`s, compound mongoose aggregations, `Promise.all`)
8. User accounts and auth (defining a user/pw schema with md5 hash and passport.js)

nonobvious things to note:
* using `this.constructor.find()` in a `schema.pre('save')` function as it is not yet instantiated
* adding custom `statics` method in a schema with `this.aggregate([{$unwind:'$tags'},{group, sort etc...}])`
* supplying the edge case of no query in a search with `{$exists: true}`
* how to make middleware to validate registration with `validator.sanitizeBody`, `checkBody`, and `normalizeEmail`
